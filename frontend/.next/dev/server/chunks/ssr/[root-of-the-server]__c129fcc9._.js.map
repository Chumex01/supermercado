{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MyPC/OneDrive/Desktop/SuperMercado/frontend/src/lib/api.ts"],"sourcesContent":["// src/lib/api.ts\r\nimport axios from \"axios\";\r\n\r\nconst API_BASE = \"http://localhost:3000\"; // tu backend NestJS\r\n\r\nexport const api = axios.create({\r\n  baseURL: API_BASE,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\n// ---- Endpoints de autenticación ----\r\nexport const login = (data: { correo: string; contrasena: string }) =>\r\n  api.post(\"/auth/login\", data);\r\n\r\nexport const register = (data: { correo: string; contrasena: string }) =>\r\n  api.post(\"/usuarios\", data);\r\n"],"names":[],"mappings":"AAAA,iBAAiB;;;;;;;;;AACjB;;;;;;AAEA,MAAM,WAAW,yBAAyB,oBAAoB;AAEvD,MAAM,MAAM,qHAAK,CAAC,MAAM,CAAC;IAC9B,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAGO,MAAM,QAAQ,CAAC,OACpB,IAAI,IAAI,CAAC,eAAe;AAEnB,MAAM,WAAW,CAAC,OACvB,IAAI,IAAI,CAAC,aAAa","debugId":null}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/MyPC/OneDrive/Desktop/SuperMercado/frontend/src/pages/login.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport Cookies from \"js-cookie\";\r\nimport { login } from \"@/lib/api\";\r\nimport axios from \"axios\";\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const [correo, setCorreo] = useState(\"\");\r\n  const [contrasena, setContrasena] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\nconst handleLogin = async (e: React.FormEvent<HTMLFormElement>) => {\r\n  e.preventDefault(); // ❌ Esto evita que la página se recargue\r\n  setError(\"\");\r\n  setLoading(true);\r\n\r\n  try {\r\n    const response = await login({ correo, contrasena });\r\n    // Guardar token en cookie\r\n    Cookies.set(\"token\", response.data.token || response.data.access_token, { expires: 1 });\r\n    router.push(\"/home\");\r\n  } catch (err: unknown) {\r\n    if (axios.isAxiosError(err)) {\r\n      setError(err.response?.data?.message || \"Error en el login ❌\");\r\n    } else {\r\n      setError(\"Error inesperado ❌\");\r\n    }\r\n  } finally {\r\n    setLoading(false);\r\n  }\r\n};\r\n\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        height: \"100vh\",\r\n      }}\r\n    >\r\n      <h1>Iniciar Sesión</h1>\r\n      <form\r\n        onSubmit={handleLogin}\r\n        style={{\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          gap: \"1rem\",\r\n          width: \"300px\",\r\n        }}\r\n      >\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Correo\"\r\n          value={correo}\r\n          onChange={(e) => setCorreo(e.target.value)}\r\n          required\r\n        />\r\n\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Contraseña\"\r\n          value={contrasena}\r\n          onChange={(e) => setContrasena(e.target.value)}\r\n          required\r\n        />\r\n\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          style={{\r\n            backgroundColor: \"#0070f3\",\r\n            color: \"white\",\r\n            padding: \"0.5rem\",\r\n            border: \"none\",\r\n            borderRadius: \"6px\",\r\n            cursor: \"pointer\",\r\n          }}\r\n        >\r\n          {loading ? \"Ingresando...\" : \"Ingresar\"}\r\n        </button>\r\n\r\n        {error && <p style={{ color: \"red\" }}>{error}</p>}\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AAEe,SAAS;IACtB,MAAM,SAAS,IAAA,oIAAS;IACxB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAC;IACrC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,+GAAQ,EAAC;IAC7C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IAEzC,MAAM,cAAc,OAAO;QACzB,EAAE,cAAc,IAAI,yCAAyC;QAC7D,SAAS;QACT,WAAW;QAEX,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,mHAAK,EAAC;gBAAE;gBAAQ;YAAW;YAClD,0BAA0B;YAC1B,mIAAO,CAAC,GAAG,CAAC,SAAS,SAAS,IAAI,CAAC,KAAK,IAAI,SAAS,IAAI,CAAC,YAAY,EAAE;gBAAE,SAAS;YAAE;YACrF,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,KAAc;YACrB,IAAI,qHAAK,CAAC,YAAY,CAAC,MAAM;gBAC3B,SAAS,IAAI,QAAQ,EAAE,MAAM,WAAW;YAC1C,OAAO;gBACL,SAAS;YACX;QACF,SAAU;YACR,WAAW;QACb;IACF;IAGE,qBACE,qKAAC;QACC,OAAO;YACL,SAAS;YACT,eAAe;YACf,YAAY;YACZ,gBAAgB;YAChB,QAAQ;QACV;;0BAEA,qKAAC;0BAAG;;;;;;0BACJ,qKAAC;gBACC,UAAU;gBACV,OAAO;oBACL,SAAS;oBACT,eAAe;oBACf,KAAK;oBACL,OAAO;gBACT;;kCAEA,qKAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;wBACzC,QAAQ;;;;;;kCAGV,qKAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;wBAC7C,QAAQ;;;;;;kCAGV,qKAAC;wBACC,MAAK;wBACL,UAAU;wBACV,OAAO;4BACL,iBAAiB;4BACjB,OAAO;4BACP,SAAS;4BACT,QAAQ;4BACR,cAAc;4BACd,QAAQ;wBACV;kCAEC,UAAU,kBAAkB;;;;;;oBAG9B,uBAAS,qKAAC;wBAAE,OAAO;4BAAE,OAAO;wBAAM;kCAAI;;;;;;;;;;;;;;;;;;AAI/C","debugId":null}}]
}